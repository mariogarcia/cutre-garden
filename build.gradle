plugins {
    id 'org.asciidoctor.jvm.convert' version '2.2.0'
    id 'org.ajoberstar.git-publish' version '2.1.1'
}

version = "1.0.0"

repositories {
    jcenter()
    mavenCentral()
}

asciidoctor {
    sources {
        include 'index.adoc'
    }

    attributes(toc: 'right', 'source-highlighter': 'coderay', toclevels: '5')
}

gitPublish {
    repoUri = 'git@github.com:mariogarcia/cutre-garden.git'
    branch  = 'gh-pages'

    contents {
        from 'build/docs/asciidoc'
    }

    commitMessage = 'Updating project documentation automatically'
}

/**
 * The documentation should be generated again before publishing
 * anything to gh-pages
 */
gitPublishPush.dependsOn('asciidoctor')
